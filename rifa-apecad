<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Rifa APECAD 2025</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; }
    .grid { display: grid; grid-template-columns: repeat(10, 1fr); gap: 5px; max-width: 500px; margin: auto; }
    .btn { padding: 10px; background: #00cc00; color: white; border: none; border-radius: 5px; cursor: pointer; }
    .ocupado { background: gray !important; cursor: not-allowed; }
    .selecionado { background: orange !important; }
    input { padding: 8px; margin: 5px; width: 200px; }
  </style>
</head>
<body>

  <h2>üéüÔ∏è Rifa APECAD 2025</h2>
  <p>Cada n√∫mero custa <strong>R$ 10,00</strong>. Escolha abaixo:</p>
  <div id="grid" class="grid"></div>

  <br>
  <input type="text" id="nome" placeholder="Seu nome"><br>
  <input type="text" id="tel" placeholder="Seu telefone/WhatsApp"><br><br>
  <button onclick="enviar()">‚úÖ Reservar N√∫meros</button>
  <p id="resposta"></p>

  <script>
    const grid = document.getElementById("grid");
    let selecionados = [];

    for (let i = 1; i <= 200; i++) {
      let n = String(i).padStart(3, '0');
      let btn = document.createElement("button");
      btn.innerText = n;
      btn.className = "btn";
      btn.onclick = () => {
        if (btn.classList.contains("ocupado")) return;
        btn.classList.toggle("selecionado");
        if (selecionados.includes(n)) {
          selecionados = selecionados.filter(num => num !== n);
        } else {
          selecionados.push(n);
        }
      };
      btn.id = "btn" + n;
      grid.appendChild(btn);
    }

    async function enviar() {
      const nome = document.getElementById("nome").value.trim();
      const tel = document.getElementById("tel").value.trim();
      if (!nome || !tel || selecionados.length === 0) {
        alert("Preencha tudo e selecione pelo menos um n√∫mero.");
        return;
      }

      const res = await fetch("https://script.google.com/macros/s/AKfycbyTgovA0NhjaeFB4EPJKbFUlEGdRlKMZza7OFxGKvQohszrYk-uXtJeRU1L21N4lERAIw/exec", {
        method: "POST",
        body: JSON.stringify({ nome: nome, telefone: tel, numeros: selecionados }),
        headers: { "Content-Type": "application/json" }
      });

      const txt = await res.text();
      document.getElementById("resposta").innerText = txt === "OK" 
        ? "‚úÖ N√∫meros reservados com sucesso!" 
        : "‚ùå Erro: algum n√∫mero j√° foi escolhido.";
    }
  </script>

</body>
</html>
