
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>üéüÔ∏è Rifa APECAD 2025</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
    .grid { display: grid; grid-template-columns: repeat(10, 1fr); gap: 5px; max-width: 600px; margin: auto; }
    .btn { padding: 10px; background: #00cc00; color: white; border: none; border-radius: 5px; cursor: pointer; }
    .ocupado { background: gray !important; cursor: not-allowed; }
    .selecionado { background: orange !important; }
    input { padding: 8px; margin: 5px; width: 250px; }
  </style>
</head>
<body>

  <h2>üéüÔ∏è <strong>Rifa APECAD 2025</strong></h2>
  <p>Cada n√∫mero custa <strong>R$ 10,00</strong>. Escolha seus n√∫meros abaixo:</p>

  <div id="grid" class="grid"></div>

  <form action="https://script.google.com/macros/s/AKfycbzv1DHfQKvXsEWNx-fddoMktp5aQWvCSwpa8LWdtLpmp9eCNPoF3S5MJ3jvxc4d3chIqQ/exec" method="POST" id="formulario">
    <input type="text" name="nome" id="nome" placeholder="Seu nome completo" required><br>
    <input type="text" name="telefone" id="tel" placeholder="Seu telefone ou WhatsApp" required><br>
    <input type="hidden" name="numeros" id="numeros">
    <button type="submit">‚úÖ Reservar N√∫meros</button>
  </form>

  <p id="resposta"></p>

  <script>
    const grid = document.getElementById("grid");
    const campoNumeros = document.getElementById("numeros");
    let selecionados = [];

    for (let i = 1; i <= 200; i++) {
      let n = String(i).padStart(3, '0');
      let btn = document.createElement("button");
      btn.innerText = n;
      btn.className = "btn";
      btn.type = "button";
      btn.onclick = () => {
        if (btn.classList.contains("ocupado")) return;
        btn.classList.toggle("selecionado");
        if (selecionados.includes(n)) {
          selecionados = selecionados.filter(num => num !== n);
        } else {
          selecionados.push(n);
        }
        campoNumeros.value = selecionados.join(",");
      };
      btn.id = "btn" + n;
      grid.appendChild(btn);
    }

    async function carregarOcupados() {
      const res = await fetch("https://opensheet.elk.sh/1tqeY7nKhF_tQfWCpB9hXY-TCSKkAtjBvT-fqHZeu8wU/P√°gina1");
      const dados = await res.json();
      dados.forEach(row => {
        if (row.clnnumero) {
          row.clnnumero.split(',').map(n => n.trim()).forEach(numero => {
            let btn = document.getElementById("btn" + numero);
            if (btn) {
              btn.classList.add("ocupado");
              btn.disabled = true;
            }
          });
        }
      });
    }

    carregarOcupados();
  </script>

</body>
</html>
